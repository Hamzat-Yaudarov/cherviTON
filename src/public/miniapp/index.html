<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>MiniApp - Cherviton</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="miniapp-root">
    <header class="miniapp-header">
      <div class="player-nick" id="playerNick">Player</div>
      <div class="player-balance" id="playerBalance">TON: 0 <button id="balanceBtn">Пополнить</button> <span id="leaveTimer" class="leave-timer" style="margin-left:12px;font-size:13px;color:#cbd5e1"></span></div>
    </header>

    <main class="miniapp-main">
      <section class="lobby">
        <div class="stake-selection">
          <label class="label">Выберите ставку:</label>
          <div class="stakes" id="stakes">
            <button data-stake="1" class="stake">1 TON</button>
            <button data-stake="3" class="stake">3 TON</button>
            <button data-stake="5" class="stake">5 TON</button>
            <button data-stake="10" class="stake">10 TON</button>
          </div>
        </div>
        <div class="controls">
          <button id="connectWallet" class="primary">Подключить кошелек</button>
          <button id="playBtn" class="primary play">Играть</button>
        </div>
      </section>

      <section class="game-area" id="gameArea" style="display:none;">
        <canvas id="gameCanvas" width="1200" height="800"></canvas>
      </section>
    </main>

    <div id="modal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3 id="modalTitle">Пополнение баланса</h3>
        <p id="modalBody">Для пополнения вы должны подключить Telegram-кошелек. Выберите сумму и нажмите "Оплатить через кошелек".</p>
        <div style="margin-top:8px;display:flex;gap:8px;align-items:center;">
          <input id="topupAmount" type="number" step="0.1" min="0.1" placeholder="Сумма в TON" style="padding:8px;border-radius:6px;border:1px solid #223;flex:1;" />
          <button id="topupPreset10" class="primary">10 TON</button>
        </div>
        <div class="modal-actions">
          <button id="modalClose">Закрыть</button>
          <button id="modalCheck">Проверить перевод</button>
          <button id="modalPay">Оплатить через кошелек</button>
          <button id="modalTopup">Пополнить 10 TON (демо)</button>
        </div>
      </div>
    </div>

  </div>
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <div id="walletModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Подключить кошелек</h3>
      <p>Попробуйте подключиться через TonConnect (Tonkeeper, Tonhub и др.) или введите адрес кошелька вручную.</p>
      <div style="display:flex;gap:8px;align-items:center;margin-top:8px;flex-direction:column;">
        <button id="tcConnectPrimary" class="primary" style="width:100%;padding:12px 16px;">Connect Wallet in Telegram</button>
        <div style="display:flex;gap:8px;width:100%;">
          <button id="tcConnect" class="primary" style="flex:0 0 180px;">Другие кошельки (TonConnect)</button>
          <input id="manualAddress" placeholder="(если нужно) Адрес TON" style="flex:1;padding:8px;border-radius:6px;border:1px solid #223;" />
        </div>
      </div>
      <div class="modal-actions">
        <button id="walletClose">Закрыть</button>
        <button id="walletSave">Сохранить адрес</button>
      </div>
    </div>
  </div>
  <script src="miniapp.js"></script>
</body>
</html>
